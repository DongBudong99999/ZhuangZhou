<!--<!DOCTYPE html> 不知道为啥 有这个就显示不出来侧面工具栏-->
<html>

<head>
    <meta charset="UTF-8">
    <title>input—data part</title>
    <!-- html 5 的编码设置方式 -->
    <meta charset="UTF-8">
    <!-- start: Mobile Specific -->
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <!-- end: Mobile Specific -->

    <link href="css/bootstrap.min.css" rel="stylesheet"/>
    <link href="css/bootstrap-responsive.min.css" rel="stylesheet"/>
    <link href="css/style.min.css" rel="stylesheet"/>
    <link href="css/style-responsive.min.css" rel="stylesheet"/>
    <link href="css/retina.css" rel="stylesheet"/>
    <!-- end: CSS -->


    <!-- The HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <link id="ie-style" href="css/ie.css" rel="stylesheet">
    <![endif]-->

    <!--[if IE 9]>
    <link id="ie9style" href="css/ie9.css" rel="stylesheet">
    <![endif]-->

    <!-- start: Favicon and Touch Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="ico/apple-touch-icon-144-precomposed.png"/>
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="ico/apple-touch-icon-114-precomposed.png"/>
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="ico/apple-touch-icon-72-precomposed.png"/>
    <link rel="apple-touch-icon-precomposed" href="ico/apple-touch-icon-57-precomposed.png"/>
    <link rel="shortcut icon" href="ico/favicon.png"/>
    <!-- end: Favicon and Touch Icons -->

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <script type="text/javascript" src="static/js/jquery-3.2.1.js"></script>
    <script type="text/javascript" src="http://malsup.github.io/jquery.form.js"></script>
    <!--
    <link rel="stylesheet" type="text/css" href="styles.css">
    -->
    <style type="text/css">
        .div_table {
            position: absolute;
            top: 15%;

        }
    </style>
    <script type="text/javascript">
        var parameter;
        var titleList = new Array()
        //获取表头，查询的数据是数据表的列名
        $.ajax({

            url: 'getTitle',
            type: 'POST',

            //dataType: 'html',
            // cache: false,
            // async: false,
            headers: {'Content-Type': 'application/json;charset=utf-8'},

            success: function (title) {
                console.log(title)
                titleList=title


            },
            error: function (err) {
                alert("表头获取失败", err);
            }
        });

        var info_list = new Array();
        var id_list = new Array();
        var time = 0;

        function getIndex1(id) {
            console.log(id_list)
            for (var index = 0; index < id_list.length; index++) {
                if (id_list[index].indexOf(id) >= 0) {
                    // console.log(id+"重复项为："+index);
                    console.log("已存在 " + id_list[index])
                    //将参数列表中 已含有此id的字段都删除

                    for (var p = 0; p < info_list.length; p++) {
                        if (info_list[p].indexOf(id_list[index]) >= 0) {
                            info_list.splice(p, 1)
                        }
                    }

                }
            }
            var objS = document.getElementById(id);

            parameter = objS.options[objS.selectedIndex].value;

            // info_list.remove(id + '="' + parameter + '"')
            var info = id + '="' + parameter + '"';
            info_list.push(info)
            id_list.push(id)
            console.log(info_list)

        }

        // 获取用户输入的值传给后段

        function getNum(id) {
            for (var i = 0; i < info_list.length; i++) {

                if (info_list[i].split("=")[0].indexOf("查询条数")>=0) {
                 // info_list 中已经含有"查询条数"这项，将该项删除
                    info_list.splice(i, 1)


                }
            }

            var input = document.getElementById(id);
            var num = input.value
            var numInfo = id + '="' + num + '"';
            info_list.push(numInfo)
            // alert(info_list.length)
            console.log(info_list)

        }

        var demo;

        function getLength(json) {
            var jsonLength = 0;
            for (var i in json) {
                jsonLength++;
            }
            return jsonLength;
        }

        var l = ["linfenleixing"];

        function select() {

            $.ajax({

                url: 'select_info',
                type: 'POST',
                data: info_list.toString(),
                //dataType: 'html',
                // cache: false,
                // async: false,
                headers: {'Content-Type': 'application/json;charset=utf-8'},

                success: function (result) {
                    if (result.length < 1) {
                        alert("无符合条件的记录");
                    } else {
                        // console.log(result);

                        demo = result[1];
                        var td_length = getLength(demo)
                        var length = result.length + 1
                        var div_table = document.getElementById("div_table");

                        if (document.getElementById("table")) {
                            var table = document.getElementById("table")
                            table.parentNode.removeChild(table);
                            // document.getElementById("table").remove(document.getElementById("table").childNodes[0])
                        }


                        var table = document.createElement("table");
                        table.setAttribute("id", "table")

                        var tr = document.createElement("tr")

                        tr.setAttribute("id", "table_0")
                        for (var j = 0; j < td_length; j++) {
                            var td = document.createElement("td")
                            td.style.width = "80px"
                            td.innerHTML = titleList[j]

                            tr.appendChild(td)
                            table.appendChild(tr)
                            div_table.appendChild(table)

                        }
                        //i表示行数
                        for (var i = 1; i < length; i++) {
                            // if (i = 0) {
                            var tr = document.createElement("tr")

                            tr.setAttribute("id", "table_" + i)
                            var each_info_str = JSON.stringify(result[i - 1])
                            // console.log((each_info_str))

                            //j表示列数
                            for (var j = 0; j < td_length; j++) {
                                var td = document.createElement("td")

                                td.innerHTML = each_info_str.split(",")[j].split(":")[1].replace("\"", "").replace("\"", "").replace("}", "");

                                tr.appendChild(td)
                            }
                            table.appendChild(tr)



                        }
                        div_table.appendChild(table)
                    }

                },
                error: function (err) {
                    alert("查询失败", err);
                }
            });
        }


    </script>
</head>


<body>
<!--<h> 以下是顶端导航栏</h>-->
<iframe src="header.html" width="100%" height="41px" frameborder=0></iframe>
<!--<h> 以上是顶端导航栏</h>-->


<!--<h>以下是侧面导航栏</h>-->


<div class="container-fluid-full" style=" height: 1500px; ;z-index: 0;position: relative; scrollbar-3d-light-color: grey;
            overflow: scroll;">
    <div class="row-fluid">

        <!-- start: Main Menu -->
        <div id="sidebar-left" class="span2">

            <div class="row-fluid actions">

                <input type="text" class="search span12" placeholder="..."/>
                <a></a>

            </div>

            <span class="nav-collapse sidebar-nav">
                <ul class="nav nav-tabs nav-stacked main-menu">
                    <li><a href="index.html"><i class="icon-bar-chart"></i><span
                            class="hidden-tablet"> 首页</span></a>
                    </li>
                    <li><a href="register.html"><i class="icon-star"></i><span class="hidden-tablet"> 用户注册</span></a>
                    </li>
                    <li><a href="login.html"><i class="icon-lock"></i><span class="hidden-tablet"> 登录页面</span></a>
                    </li>
                    <li>
                        <a class="dropmenu" href="#">
                            <i class="icon-folder-close-alt"></i><span
                                class="hidden-tablet">基础数据库系统</span>
                            <!--<span class="label">3</span></a>-->
                            <ul style="display: block;">
                                  <li><a class="submenu" href="upload.html"><i class="icon-tasks"></i><span
                                          class="hidden-tablet"> <span
                                          style="color: #9ecaed ">文件上传</span></span></a></li>

                                <li><a class="submenu" href="select_data.html"><i class="icon-hdd"></i><span
                                        class="hidden-tablet"><span style="color: #9ecaed "> 数据查询</span></span></a></li>

                                <li><a class="submenu" href="to_db.html"><i class="icon-envelope"></i><span
                                        class="hidden-tablet"><span style="color: #9ecaed "> 数据录入</span></span></a></li>

                                <li><a class="submenu" href="file-manager.html"><i class="icon-tasks"></i><span
                                        class="hidden-tablet"> <span style="color: #9ecaed ">文件管理</span></span></a></li>

                                <li><a class="submenu" href="tasks.html"><i class="icon-tasks"></i><span
                                        class="hidden-tablet"> <span style="color: #9ecaed ">数据处理</span></span></a></li>
                                <li><a class="submenu" href="tasks.html"><i class="icon-tasks"></i><span
                                        class="hidden-tablet"> <span style="color: #9ecaed ">计算记录</span></span></a></li>
                            </ul>
                        </a>
                    </li>
                    <li>
                        <a class="dropmenu" href="#"><i class="icon-folder-close-alt"></i><span
                                class="hidden-tablet">技术规范管理系统</span>
                            <!--<span class="label">3</span></a>-->
                            <ul style="display: block;">
                                <li><a class="submenu" href="infrastructure.html"><i class="icon-hdd"></i><span
                                        class="hidden-tablet"> <span
                                        style="color: #9ecaed ">计算公式介绍</span></span></a></li>
                                <li><a class="submenu" href="format.html"><i class="icon-envelope"></i><span
                                        class="hidden-tablet"> <span
                                        style="color: #9ecaed ">资产价值计算</span></span></a></li>
                                <li><a class="submenu" href="tasks.html"><i class="icon-tasks"></i><span
                                        class="hidden-tablet"> <span
                                        style="color: #9ecaed ">公式动态更新</span></span></a></li>
                            </ul>
                        </a>
                    </li>
                    <li>
                        <a class="dropmenu" href="#"><i class="icon-folder-close-alt"></i><span
                                class="hidden-tablet">可视化系统</span>
                            <!--<span class="label">3</span></a>-->
                            <ul style="display: block;">
                                <li><a class="submenu" href="select_data_tochart.html"><i class="icon-tasks"></i><span
                                        class="hidden-tablet"><span
                                        style="color: #9ecaed "> 数据可视化</span></span></a></li>
                                <li><a class="submenu" href="to_db.html"><i class="icon-hdd"></i><span
                                        class="hidden-tablet"> <span style="color: #9ecaed ">生成地图</span></span></a></li>
                                <li><a class="submenu" href="chart.html"><i class="icon-envelope"></i><span
                                        class="hidden-tablet"> <span style="color: #9ecaed ">图标样式</span></span></a></li>
                                <li><a class="submenu" href="tasks.html"><i class="icon-tasks"></i><span
                                        class="hidden-tablet"><span style="color: #9ecaed "> 数据对比</span></span></a></li>
                            </ul>
                        </a>
                    </li>
                    <li>
                        <a class="dropmenu" href="#"><i class="icon-folder-close-alt"></i><span
                                class="hidden-tablet">资源评价系统</span>
                            <!--<span class="label">3</span></a>-->
                            <ul style="display: block;">
                                <li><a class="submenu" href="infrastructure.html"><i class="icon-hdd"></i><span
                                        class="hidden-tablet"> <span
                                        style="color: #9ecaed ">评价等级声明</span></span></a></li>
                                <li><a class="submenu" href="format.html"><i class="icon-envelope"></i><span
                                        class="hidden-tablet"> <span style="color: #9ecaed ">资源评价</span></span></a></li>


                                <li><a class="submenu" href="specialist.html"><i class="icon-tasks"></i><span
                                        class="hidden-tablet"><span
                                        style="color: #9ecaed "> 专家评分入口</span></span></a></li>
                                <li><a class="submenu" href="ahp.html"><i class="icon-tasks"></i><span
                                        class="hidden-tablet"><span
                                        style="color: #9ecaed "> 层次分析入口</span></span></a></li>
                                <li><a class="submenu" href="tasks.html"><i class="icon-tasks"></i><span
                                        class="hidden-tablet"><span
                                        style="color: #9ecaed "> 评价结果分析</span></span></a></li>
                            </ul>
                        </a>
                    </li>


                </ul>
            </span>
        </div>
    </div>
</div>
<h>一上是侧面导航栏</h>


<script type="text/javascript">
    function getParam(id) {

        // alert(id);
        $.ajax({
            //传递字符串的情况
            url: "/getParam",
            type: "POST",
            data: id,
            headers: {'Content-Type': 'text/plain;charset=UTF-8'},
            success: function (res) {
                var param_list = document.getElementById(id)

                // console.log(res)
                if (param_list.options.length < 1) {
                    param_list.options.add(new Option("----请选择----", "请选择"));
                    for (var i = 0; i < res.length; i++) {

                        param_list.options.add(new Option(res[i], res[i]));
                    }
                }

            },
            error: function (err) {
                alert("网络连接失败,请检查网络配置", err);
            }

        });

    }
</script>


<!-- start: Content -->
<div id="content" class="span10"
     style="  z-index: 1100;width: 1400px;  float: left; position: absolute; left: 13%; top: 8%;">

    <div class="row-fluid">

        <li class="dropdown hidden-phone open" style="width: 600px;display:inline">
            <span style="color:black;font-size:16px ;border:white">林分类型 : </span>
            <select id="林分类型" style="width: 80px" onchange="getIndex1(this.id)" onclick="getParam(this.id)"></select>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </li>
        <li class="dropdown hidden-phone open" style="width: 600px;display:inline">
            <span style="color:black;font-size:16px ;border:white">林班号 : </span>
            <select id="林班号" style="width: 80px" onchange="getIndex1(this.id)" onclick="getParam(this.id)"></select>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </li>
        <li class="dropdown hidden-phone open" style="width: 600px;display:inline">
            <span style="color:black;font-size:16px ;border:white">小班号 : </span>
            <select id="小班号" style="width: 80px" onchange="getIndex1(this.id)" onclick="getParam(this.id)"></select>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </li>
        <li class="dropdown hidden-phone open" style="width: 600px;display:inline">
            <span style="color:black;font-size:16px ;border:white">坡向 : </span>
            <select id="坡向" style="width: 80px" onchange="getIndex1(this.id)" onclick="getParam(this.id)"></select>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </li>
        <li class="dropdown hidden-phone open" style="width: 600px;display:inline">
            <span style="color:black;font-size:16px ;border:white">坡度 : </span>
            <select id="坡度" style="width: 80px" onchange="getIndex1(this.id)" onclick="getParam(this.id)"></select>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </li>
        <li class="dropdown hidden-phone open" style="width: 600px;display:inline">
            <span style="color:black;font-size:16px ;border:white">平均树高 : </span>
            <select id="平均树高" style="width: 80px" onchange="getIndex1(this.id)" onclick="getParam(this.id)"></select>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </li>
        <li class="dropdown hidden-phone open" style="width: 600px;display:inline">
            <span style="color:black;font-size:16px ;border:white">龄级 : </span>
            <select id="龄级" style="width: 80px" onchange="getIndex1(this.id)" onclick="getParam(this.id)"></select>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </li>
        <li class="dropdown hidden-phone open" style="width: 600px;display:inline">
            <span style="color:black;font-size:16px ;border:white">胸径 : </span>
            <select id="胸径" style="width: 80px" onchange="getIndex1(this.id)" onclick="getParam(this.id)"></select>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </li>

        <li class="dropdown hidden-phone open" style="width: 600px;display:inline">
            <span style="color:black;font-size:16px ;border:white">立地类型 : </span>
            <select id="立地类型" style="width: 80px" onchange="getIndex1(this.id)" onclick="getParam(this.id)"></select>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </li>
        <li class="dropdown hidden-phone open" style="width: 600px;display:inline">
            <span style="color:black;font-size:16px ;border:white">每公顷株数 : </span>
            <select id="每公顷株数" style="width: 80px" onchange="getIndex1(this.id)" onclick="getParam(this.id)"></select>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </li>
        <li class="dropdown hidden-phone open" style="width: 600px;display:inline">
            <span style="color:black;font-size:16px ;border:white">小班蓄积 : </span>
            <select id="小班蓄积" style="width: 80px" onchange="getIndex1(this.id)" onclick="getParam(this.id)"></select>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </li>
        <li class="dropdown hidden-phone open" style="width: 600px;display:inline">
            <span style="color:black;font-size:16px ;border:white">坡位 : </span>
            <select id="坡位" style="width: 80px" onchange="getIndex1(this.id)" onclick="getParam(this.id)"></select>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </li>
        <li class="dropdown hidden-phone open" style="width: 600px;display:inline">
            <span style="color:black;font-size:16px ;border:white">郁闭度 : </span>
            <select id="郁闭度" style="width: 80px" onchange="getIndex1(this.id)" onclick="getParam(this.id)"></select>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </li>
        <li class="dropdown hidden-phone open" style="width: 600px;display:inline">
            <span style="color:black;font-size:16px ;border:white">面积 : </span>
            <select id="面积" style="width: 80px" onchange="getIndex1(this.id)" onclick="getParam(this.id)"></select>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </li>
        <li class="dropdown hidden-phone open" style="width: 600px;display:inline">
            <span style="color:black;font-size:16px ;border:white">地位级 : </span>
            <select id="地位级" style="width: 80px" onchange="getIndex1(this.id)" onclick="getParam(this.id)"></select>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </li>

        <li class="dropdown hidden-phone open" style="width: 600px;display:inline">
            <span style="color:black;font-size:16px ;border:white">操作时间 : </span>
            <select id="操作时间" style="width: 80px" onchange="getIndex1(this.id)" onclick="getParam(this.id)"></select>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </li>
        <li class="dropdown hidden-phone open" style="width: 600px;display:inline">
            <span style="color:black;font-size:16px ;border:white">龄组 : </span>
            <select id="龄组" style="width: 80px" onchange="getIndex1(this.id)" onclick="getParam(this.id)"></select>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </li>


        <div style="display: inline">
            <span style="color:black;font-size:16px ;border:white">查询条数：</span>
            <input type="text" id="查询条数" onchange="getNum(this.id)">
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button onclick="select()">查询</button>
            <p>&nbsp;</p>
        </div>


        <!--<iframe src="Basic_area_chart.html" style="width: 1000px;height: 800px;border: 1px"></iframe>-->
        <br>
        <br>
    </div>
    <div id="div_table" class="div_table" style=" height: 750px; overflow:auto"></div>
</div>


</body>
</html>